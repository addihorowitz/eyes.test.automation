language: 
- python
- java
- generic
- ruby
matrix:
    include:
        - os: linux
          sudo: required
          python: 2.7 
          env: TOXENV=py27 DISPLAY=':0.0' 
          install:
          - pip install -U selenium
          - pip install -U pyvirtualdisplay
          - pip install -U sauceclient
          - pip install -r python/requirements.txt
          script:
          - export DISPLAY=:0.0;cd python;python applitools_sauce_test.py
        - os: linux
          sudo: required
          python: 3.3
          env: TOXENV=py33 DISPLAY=':0.0'  
          install:
          - pip install -U selenium
          - pip install -U pyvirtualdisplay
          - pip install -U sauceclient
          - pip install -r python/requirements.txt
          script:
          - export DISPLAY=:0.0;cd python;python applitools_sauce_test.py
        - os: osx
          language: generic
          env: TOXENV=py27 DISPLAY=':0.0'  
          install:
          - pip install -U selenium
          - pip install -U pyvirtualdisplay
          - pip install -U sauceclient
          - pip install -r python/requirements.txt
          script:
          - export DISPLAY=:0.0;cd python;python applitools_sauce_test.py
        - os: osx
          language: generic
          env: TOXENV=py33 DISPLAY=':0.0'  
          install:
          - pip install -U selenium
          - pip install -U pyvirtualdisplay
          - pip install -U sauceclient
          - pip install -r python/requirements.txt
          script:
          - export DISPLAY=:0.0;cd python;python applitools_sauce_test.py
        - os: linux
          language: java
          jdk: oraclejdk8
          env: DISPLAY=':0.0'   
          install: cd java/sdk/eyes.selenium.java/;mvn test
        - os: osx
          language: java
          osx_image: xcode8
          env: DISPLAY=':0.0'  
          install: cd java/sdk/eyes.selenium.java/;mvn test
        - os : linux 
          language: ruby
          sudo: required
          env: DISPLAY=':0.0'  
          dist: trusty
          rvm: 
          #- 1.9.3-p551
          #- ruby-2.0.0-p648
          #ruby:
          #- ruby-1.9.3-p551
          #- ruby-2.0.0-p648
          #- ruby-2.1.6
          #- ruby-2.3.1
          #- rbx-2.2.7
          - 2.4.1
          - 2.3.4
          before_install:
          - rvm install 2.3.4
          - rvm install 2.4.1
          - "export DISPLAY=:99.0"
          - "sh -e /etc/init.d/xvfb start"
          - wget -N http://chromedriver.storage.googleapis.com/2.31/chromedriver_linux64.zip -P ~/
          - unzip ~/chromedriver_linux64.zip -d ~/
          - chmod +x ~/chromedriver
          - sudo mv -f ~/chromedriver /usr/local/share/chromedriver
          - sudo ln -s /usr/local/share/chromedriver /usr/local/bin/chromedriver
          - rvm reinstall ruby-head --binary
          - gem install public_suffix -v '2.0.5'
          - cd ruby/sdk/ext/eyes_core;ruby extconf.rb;make;make install
          script:
          - cd ../.. 
          - bundle install --quiet 
          - bundle exec rake rubocop
          - cd examples
          - bundle exec rspec check_frame_and_element_example.rb
          - bundle exec rspec check_frame_and_element_fluent_interface_example.rb
          - bundle exec rspec images_example_fluent_interface_script.rb
          - bundle exec rspec images_example_script.rb
          - bundle exec rspec images_single_example_fi_script.rb
          - bundle exec rspec capybara_example.rb
          - bundle exec rspec watir_test_script.rb
        - os : osx
          language: ruby
          sudo: required
          env: DISPLAY=':0.0'
          dist: trusty
          rvm: ruby-1.9.3-p551
          #ruby:
          #- ruby-1.9.3-p551
          #- ruby-2.0.0-p648
          #- ruby-2.1.6
          #- ruby-2.3.1
          #- rbx-2.2.7
          #- ruby-2.4.1
          before_install:
          - "export DISPLAY=:99.0"
          - curl -O http://chromedriver.storage.googleapis.com/2.31/chromedriver_mac64.zip -P /tmp 
          - unzip /tmp/chromedriver_mac64.zip -d /tmp
          - chmod +x /tmp/chromedriver
          - sudo mv -f /tmp/chromedriver /usr/local/share/chromedriver
          - sudo ln -s /usr/local/share/chromedriver /usr/local/bin/chromedriver
          - rvm reinstall ruby-head --binary
          - gem install public_suffix -v '2.0.5'
          - cd ruby/sdk/ext/eyes_core;ruby extconf.rb;make;make install
          script:
          - cd ../..
          - bundle install --quiet
          - bundle exec rake rubocop
          - cd examples
          - bundle exec rspec check_frame_and_element_example.rb
          - bundle exec rspec check_frame_and_element_fluent_interface_example.rb
          - bundle exec rspec images_example_fluent_interface_script.rb
          - bundle exec rspec images_example_script.rb
          - bundle exec rspec images_single_example_fi_script.rb
          - bundle exec rspec capybara_example.rb
          - bundle exec rspec watir_test_script.rb
